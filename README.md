# RESTful API –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É:

![img](https://github.com/user-attachments/assets/428976ae-f760-4bc3-8254-96626f12c35f)


–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É Code, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É HTTPS –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É:

`git clone <–∏ —Å—Å—ã–ª–∫–∞ –∫–æ—Ç–æ—Ä—ã–π —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏, —á–µ—Ä–µ–∑ Ctrl+V>.`

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞:

cd <–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–∞–ø–∫–∏>

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
`python -m venv venv`
–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –µ–≥–æ:
Windows:
    `venv\Scripts\activate`
MacOS:
    `source venv/bin/activate`

–°–∫–∞—á–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Ç—Å–∏: `pip install -r requirements.txt`

–ò –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –±–¥ 

## –ó–∞—É–ø—Å–∫

`python main.py` –¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
![img_2](https://github.com/user-attachments/assets/ff398f8f-e55c-4e5c-82d6-11e3b21d350f)

![img_3](https://github.com/user-attachments/assets/e992eedb-b483-4374-a3b2-91d7846c3841)

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –ø–æ —Å—Å—ã–ª–∫–µ –≤ localhost –∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ—Å–ª–µ 8000 –ø–∏—à–µ–º /docs —á—Ç–æ –±—ã –ø–µ—Ä–µ–π—Ç–∏ –≤ Swagger UI
_____
![img_4](https://github.com/user-attachments/assets/4bfd466e-6670-4706-a8a7-4dbaf57c9c3c)

–ö–∞–∫ –ø–µ—Ä–µ—à–ª–∏ –≤ Swagger UI(/docs) –Ω–∞–º –Ω–∞–¥–æ –ø—Ä–æ–π—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ —Ä–∞–∑–¥–µ–ª–µ Auth –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ Register –≤ –æ—Ç–∫—Ä—ã–≤—à–µ–º –æ–∫–Ω–µ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ ![img_5](https://github.com/user-attachments/assets/5d396ebc-de38-4625-9dd1-3656b66e70fb)

–¥–∞–ª–µ–µ –º—ã –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
![img_7](https://github.com/user-attachments/assets/7ce338fe-c581-4bbf-baf8-6001d45c47d8)

–≤–æ–¥–∏–º email –∏ password –¥–∞–ª–µ–µ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ Execute ![img_8](https://github.com/user-attachments/assets/44602b65-d691-44aa-ab41-f892a5991c1b)
 –≤ –∏—Ç–æ–≥–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –¥–∞—Ç—å –Ω–∞–º 200 –∫–æ–¥ —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤—Å–µ —Ö–æ—Ä–æ—à–æ –µ—Å–ª–∏ —É –≤–∞—Å –Ω–µ 200 –∫–æ–¥ –∑–Ω–∞—á–∏—Ç –≤—ã –æ—à–∏–±–ª–∏—Å—å –≤ email
_____
–ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ login –∏ –≤–æ–¥–∏–º email —Å password, –í–ê–ñ–ù–û email –≤–æ–¥–∏–º –≤ —Å—Ç—Ä–æ–∫—É –≥–¥–µ username
![img_9](https://github.com/user-attachments/assets/de53cd23-6a31-4f29-8df6-753fcb7cb6ed)

–ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∏–ª–∏ 200 –∫–æ–¥ –∑–Ω–∞—á–∏—Ç –≤—Å–µ —Ö–æ—Ä–æ—à–æ.
___
–î–∞–ª–µ–µ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∫–Ω–∏–≥—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç.–¥. –í—ã –¥–æ–ª–∂–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è ![img_11](https://github.com/user-attachments/assets/c2dcfb4c-20e6-4826-bb5f-053b305eb1b6)
) –Ω–∞–∂–∏–º–∞–µ—Ç–µ –Ω–∞ –Ω–µ–≥–æ –∏ —Ç–∞–∫ –∂–µ –≤–æ–¥–∏—Ç–µ email —Å password, email –≤–æ–¥–∏–º –≤ username
![img_12](https://github.com/user-attachments/assets/a900dc9a-236d-44d1-9659-fdea7754f528)
![img_13](https://github.com/user-attachments/assets/388dfec4-1ce4-4219-8004-a872c4f3282d)
 –Ω–∞–∂–∏–º–∞–µ—Ç–µ close –∏ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å, –∏–∑–º–µ–Ω–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å, –ø–æ–ª—É—á–∞—Ç—å –∫–Ω–∏–≥—É –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
__________
__________
## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
alembic/
    version/
        –ú–∏–≥—Ä–∞—Ü–∏—è.py
        –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ.py
    env.py ------> –ü–æ–¥–∫–ª—é—á–µ–Ω–æ models.Base –∏–∑ –ø–∞–ø–∫–∏ app
    README
    script.py.mako
app/
    auth.py ----------> –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
    database.py ------> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
    depend.py --------> –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI
    models.py --------> –ú–æ–¥–µ–ª–∏ SQLAlchemy
        routers/
            auth.py -------> Register –∏ login
            books.py ------> –ö–Ω–∏–≥–∏ CRUD
            borrow.py -----> –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            readers.py ----> –ß–∏—Ç–∞—Ç–µ–ª–∏
tests/
    __init__.py
    conftest.py -----> –ó–∞–≤–∏—Å–∏–º–æ—Ç—Å–∏, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–¥ –∏ —Ç.–¥.
    test_auth.py ----> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –†–µ–≥–∏—Å—Ç–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ç.–¥.
    test_books.py ---> –¢–µ—Å—Ç–∏—Ä–æ–∞–≤–Ω–∏–µ –ö–Ω–∏–≥ CRUD –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
    test_borrow.py --> –¢–µ—Å—Ç–∏—Ä–æ–∞–≤–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∫–∏, –≤–∑—è–ª –±–æ–ª—å—à–µ 3 –∏–ª–∏ –Ω–µ—Ç –∏ —Ç.–¥
alembic.ini
main.py
requirements.txt
```
____
____
## –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ë–î
- –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏: `Book`, `Reader`, `Borrow`
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–≤—è–∑–∏: `Reader` ‚Äî `Borrow` (–æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º), `Book` ‚Äî `Borrow` (–æ–¥–∏–Ω-–∫–æ-–º–Ω–æ–≥–∏–º)
- –¢–∞–±–ª–∏—Ü–∞ `Borrow` —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫—É—é –∫–Ω–∏–≥—É –≤–∑—è–ª
____
____
## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### 4.1. –ù–µ–ª—å–∑—è –≤—ã–¥–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–Ω–∏–≥—É –¥–≤—É–º —Ä–∞–∑–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ü—Ä–∏ –≤—ã–¥–∞—á–µ –∫–Ω–∏–≥–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —Å–≤–æ–±–æ–¥–Ω–∞ –ª–∏ –æ–Ω–∞ (`is_borrowed=False`). –ï—Å–ª–∏ –∫–Ω–∏–≥–∞ —É–∂–µ –∑–∞–Ω—è—Ç–∞, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

### 4.2. –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –±–æ–ª–µ–µ 3-—Ö –∫–Ω–∏–≥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ü—Ä–∏ –≤—ã–¥–∞—á–µ –∫–Ω–∏–≥–∏ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∞—Ä–µ–Ω–¥ (—É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç `returned_at`). –ï—Å–ª–∏ –∏—Ö >= 3 ‚Äî –≤—ã–¥–∞—á–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.

### 4.3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–∑—è—Ç—å –∫–Ω–∏–≥—É –ø–æ–≤—Ç–æ—Ä–Ω–æ, –ø–æ–∫–∞ –Ω–µ –≤–µ—Ä–Ω—É–ª –µ—ë
- –ü—Ä–∏ –≤—ã–¥–∞—á–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∞—Ä–µ–Ω–¥—ã —ç—Ç–æ–π –∫–Ω–∏–≥–∏ —ç—Ç–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

## –°–ª–æ–∂–Ω–æ—Å—Ç–∏
- –ë—ã–ª–æ –º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π –Ω–æ –≤–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–º–Ω—é 

## 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞—É–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ –ø–æ–Ω–∏–º–∞–ª –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å, —è –ø–æ–Ω–∏–º–∞—é –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å —ç—Ç–æ –±–∞–∑–∞ –Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∏–¥–µ–æ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —è –ø–æ–Ω—è–ª
- https://youtu.be/0A_GCXBCNUQ?si=dAASwDmTpPXRUFTS ---> —Å—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ
- https://fastapi.tiangolo.com/tutorial/security/oauth2-jwt/#handle-jwt-tokens -----> –°—Å—ã–ª–∫–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## 2. –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ JWT token
- –û–¥–Ω–æ–π –∏–∑ –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –±—ã–ª–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
  * –ù–∞ —ç—Ç–∞–ø–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:
    * –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è: –Ω–∞ —Å—Ç–∞—Ä—Ç–µ —è —Å–ª—É—á–∞–π–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–ª —Ö—ç—à –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–∞ verify, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–æ False.
    * JWT-—Ç–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–ª, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–±—Ä–∞—â–µ–Ω–∏—è —Å –∏—Å—Ç–µ–∫—à–∏–º —Ç–æ–∫–µ–Ω–æ–º API –ø—Ä–æ—Å—Ç–æ –ø–∞–¥–∞–ª –±–µ–∑ —á–∏—Ç–∞–µ–º–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
- –†–µ—à–µ–Ω–∏–µ
  * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω passlib.context.CryptContext –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª–µ–π —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º bcrypt.
  * –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏–º–µ–Ω—ë–Ω python-jose, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ exp.

- https://fastapi.tiangolo.com/tutorial/security/oauth2-jwt/#hash-and-verify-the-passwords ---> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥ –º–Ω–µ
- https://habr.com/ru/companies/dododev/articles/520046/ ---> –í–æ—Ç —Ç–æ–∂–µ –ø–æ–º–æ–≥ –ø–æ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É

## 3. –ü—Ä–æ–±–ª–µ–º–∞ —Å ISBN
- –ï—Å–ª–∏ ISBN "" —ç—Ç–æ –Ω–µ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –æ–Ω null
  * –û–Ω —Ä—É–≥–∞–ª—Å—è –∫–æ–≥–¥–∞ —è isbn —É–±–∏—Ä–∞–ª —Å—Ç—Ä–æ—á–∫—É —Å—Ç—Ä–∏–Ω–≥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–µ, —Ç–∏–ø–∞ –æ–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫ –∫–∞–∫ —É –Ω–∞—Å isbn uniq
- –†–µ—à–µ–Ω–∏–µ
  *     if not data.get("isbn"):
        data["isbn"] = None 
–°–ª—É—á–∞–π–Ω–æ –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ –ø—Ä–µ–ø–æ–¥–æ–≤–∞—Ç–µ–ª—è –ø–æ —Ä–±–¥ –∏ —Å–ø—Ä–æ—Å–∏–ª —É –Ω–µ–≥–æ –Ω–∞ —Å—á–µ—Ç —ç—Ç–æ üòÖ

## 4. –ü—Ä–æ–±–ª–µ–º–∞ –≤—ã–≤–æ–¥–∞ –≤—Å–µ—Ö –∫–Ω–∏–≥
- –ö–æ–≥–¥–∞ —è —Ö–æ—Ç–µ–ª –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –∫–Ω–∏–≥–∏ –æ–Ω –≤—ã–¥–∞–≤–∞–ª 422 –∫–æ–¥ Unprocessable entity
  * FastApi —Å–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª book_id –∏ –æ–Ω –¥—É–º–∞–ª —á—Ç–æ book_id —ç—Ç–æ all –Ω–æ all —ç—Ç–æ –Ω–µ int –≤–æ—Ç –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ 422 –∫–æ–¥
- –†–µ—à–µ–Ω–∏–µ
  * –ü—Ä–æ—Å—Ç–æ –≠–Ω–¥–ø–æ–∏–Ω—Ç/all –ø–æ—Å—Ç–∞–≤–∏–ª –≤–Ω–∞—á–∞–ª–µ –∏ –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ

## 5. –ü—Ä–æ–±–ª–µ–º–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≤—ã–¥–∞—á–∞ —É–∂–µ –≤—ã–¥–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–∏
* –ù—É –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥ id5 –ø—ã—Ç–∞–ª—Å—è –≤–∑—è—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–Ω–∏–≥—É –ø–æ–≤—Ç–æ—Ä–Ω–æ, —è –∑–∞–ø—Ä–µ—Ç–∏–ª –≤–∑—è—Ç—å –±–æ–ª—å—à–µ 3 –Ω–æ –∫–æ–≥–¥–∞ –æ–Ω –±—Ä–∞–ª —Ç—É –∂–µ –∫–Ω–∏–≥—É –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–µ —Å–¥–∞–≤ –ø—Ä–æ—à–ª—É—é —Ç–æ –æ–Ω –º–æ–≥
* –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏–ª –¥–æ–ø. –ø—Ä–æ–≤–µ—Ä–∫—É, –µ—Å–ª–∏ –∫–Ω–∏–≥–∞ —Å —Ç–∞–∫–∏–º id –≤—ã–¥–∞–Ω–∞ —á–∏—Ç–∞—Ç–µ–ª—é —Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–Ω –Ω–µ –º–æ–≥ —É–∂–µ –≤–∑—è—Ç—å

https://fastapi.tiangolo.com/tutorial/dependencies/#share-annotated-dependencies ----> –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥

## 6. –ü—Ä–æ–±–ª–µ–º–∞ —Å pytest
- –Ø –Ω–µ —Å–∏–ª–µ–Ω –≤ —Ç–µ—Å—Ç–∏—Ä–æ–∞–≤–Ω–∏–µ –∏ –ø—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º —á—Ç–æ —è –Ω–µ –º–æ–≥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–∫ –∫–∞–∫ —è –±—Ä–∞–ª –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª –µ–≥–æ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—é –∏ –±–µ–∑ httpx
- –†–µ—à–µ–Ω–∏–µ:
  * –ü–æ—Å–º–æ—Ç—Ä–µ–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –≤–∏–¥–µ–æ –∏–∑ —é—Ç—É–±, –ø–æ–Ω—è–ª —á—Ç–æ –Ω–∞–¥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã 
  * https://fastapi.tiangolo.com/ru/tutorial/testing/
  * https://fastapi.tiangolo.com/ru/advanced/async-tests/
  * https://youtu.be/3U1FxzBlpV8?si=MgGOKV6zctTQQPbr ---> –í–∏–¥–µ–æ –∏–∑ —é—Ç—É–±–∞, –Ω–µ —Å–∏–ª—å–Ω–æ –ø–æ–º–æ–≥ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–º—É —è —É–∑–Ω–∞–ª —á—Ç–æ –Ω–∞–¥–æ Client –∏ httpx

_____

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é JWT (JSON Web Token), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º.

- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
  * –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (/login), –≤–≤–µ–¥—ë–Ω–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è.
  * –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –∏ email –≤–µ—Ä–Ω—ã, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JWT-—Ç–æ–∫–µ–Ω —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ jose.jwt.encode. –¢–æ–∫–µ–Ω –≤–∫–ª—é—á–∞–µ—Ç:

    * sub ‚Äî email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

    * exp ‚Äî —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞

  * –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ passlib, –∞–ª–≥–æ—Ä–∏—Ç–º bcrypt.
  * –¢–æ–∫–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization: Bearer <—Ç–æ–∫–µ–Ω> –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º.

- –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
* /books
  * GET / ‚Äì –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ (skip, limit)
  * POST / ‚Äì —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏
  * PUT /{book_id} ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
  * DELETE /{book_id} ‚Äì —É–¥–∞–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏
* /readers
  * GET / ‚Äì –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —á–∏—Ç–∞—Ç–µ–ª–µ–π
  * GET /{reader_id} ‚Äì –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ–≥–æ —á–∏—Ç–∞—Ç–µ–ª—è
  * POST / ‚Äì —Å–æ–∑–¥–∞—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è
  * PUT /{reader_id} ‚Äì –æ–±–Ω–æ–≤–∏—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è
  * DELETE /{reader_id} ‚Äì —É–¥–∞–ª–∏—Ç—å —á–∏—Ç–∞—Ç–µ–ª—è
* /borrow
  * POST /borrow ‚Äì –≤–∑—è—Ç—å –∫–Ω–∏–≥—É (—É—á—ë—Ç –ª–∏–º–∏—Ç–∞ –≤ 3 –∫–Ω–∏–≥–∏)
  * POST /return ‚Äì –≤–µ—Ä–Ω—É—Ç—å –∫–Ω–∏–≥—É
  * GET /reader/{reader_id} ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∑—è—Ç—ã—Ö –∫–Ω–∏–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∏—Ç–∞—Ç–µ–ª—è

- –ù–µ–∑–∞—â–∏—â—ë–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
* /auth
  * POST /register ‚Äì —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  * POST /login ‚Äì –ª–æ–≥–∏–Ω –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
* /books
  * GET /all ‚Äì –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–∏–≥
  * GET /{book_id} ‚Äì –ø–æ–ª—É—á–∏—Ç—å –∫–Ω–∏–≥—É –ø–æ ID

- –ü–æ—á–µ–º—É GET /all –∏ GET /{book_id} –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã, —Ç–∞–∫ –∫–∞–∫ —è –¥—É–º–∞—é –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —É–∑–Ω–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥
- –î–æ–ø—É—Å—Ç–∏–º –≤—ã –ø—Ä–∏—à–ª–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –≤–∞–º –Ω–∞–¥–æ –∫–Ω–∏–≥–∞ 1984 –≤—ã –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ all –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ –ø–æ–¥—Ö–æ–¥–∏—Ç–µ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—é –∏ –æ–Ω –≤–∞–º –¥–∞—Å—Ç –∑–∞ —Ä–∞–∑ –æ–Ω –≤–∞—Å –∑–∞—Ä–µ–≥–∞–µ—Ç (+1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
____
## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–¥–µ—è (—Ñ–∏—á–∞)

**–ò—Å—Ç–æ—Ä–∏—è –∞—Ä–µ–Ω–¥:** –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞—Ä—Ö–∏–≤ –∞—Ä–µ–Ω–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –¥–∞—Ç–∞–º–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∏ –≤—ã–¥–∞—á–∏.

**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:** –¥–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/readers/{reader_id}/history`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∞—Ä–µ–Ω–¥ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `Borrow`, –≥–¥–µ `returned_at` –Ω–µ null.

–ú–æ–∂–Ω–æ –µ—â–µ –¥–æ–±–∞–≤–∏—Ç—å ML –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å –∫–Ω–∏–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
